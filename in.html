<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Location Sender</title>
<style>
body { font-family: Arial; text-align: center; margin-top: 40px; }
button {
  padding: 12px 20px;
  background: #008cff;
  border: none;
  color: white;
  border-radius: 8px;
  font-size: 18px;
}
</style>
</head>
<body>

<h2>üìç Live Location Sharing</h2>
<p>Status: <span id="status">Waiting...</span></p>
<button onclick="start()">Start Live Tracking</button>

<script type="module">
// Firebase Setup
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-app.js";
import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/10.1.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyCsGBSRCHVUhXQZ5DNMEZWgQWk1gxMF1E4",
  authDomain: "signup-d32c5.firebaseapp.com",
  projectId: "signup-d32c5",
  storageBucket: "signup-d32c5.firebasestorage.app",
  messagingSenderId: "583812949955",
  appId: "1:583812949955:web:fab1bb7be94bc1b4ab3f76",
  measurementId: "G-VLC3QHK8CG",
  databaseURL: "https://signup-d32c5-default-rtdb.firebaseio.com/"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

function start(){
  document.getElementById("status").innerHTML = "Tracking Started ‚úÖ";

  setInterval(() => {
    navigator.geolocation.getCurrentPosition((pos)=>{
      let lat = pos.coords.latitude;
      let lng = pos.coords.longitude;
      let bat = navigator.getBattery ? navigator.getBattery().then(b=>b.level*100) : 0;

      Promise.resolve(bat).then(battery => {
        set(ref(db, "location"), {
          lat: lat,
          lng: lng,
          battery: Math.round(battery || 0),
          device: navigator.userAgent,
          time: new Date().toString()
        });
      });
    });
  }, 4000);
}
</script>
</body>
</html>
