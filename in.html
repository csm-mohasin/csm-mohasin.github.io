<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>üìç Live Location Sender</title>

<style>
  body {
    font-family: Arial;
    background: #e9f3ff;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }
  .box {
    background: white;
    padding: 25px;
    width: 90%;
    max-width: 400px;
    border-radius: 15px;
    text-align: center;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  button {
    background: #007bff;
    color: white;
    padding: 12px 20px;
    border: none;
    border-radius: 8px;
    font-size: 18px;
    cursor: pointer;
  }
  button:active {
    transform: scale(0.96);
  }
  .status {
    margin-top: 10px;
    font-size: 16px;
    font-weight: bold;
  }
</style>
</head>
<body>

<div class="box">
  <h2>üìç Live Location Sharing</h2>
  <p id="info">Press Start to send your real-time location</p>
  <button onclick="startTracking()">Start Tracking</button>
  <p class="status" id="statusText">üõë Not sending</p>
</div>

<script>
const DB_URL = "https://signup-d32c5-default-rtdb.firebaseio.com/location.json"; // ‚úÖ your path

async function sendToFirebase(lat, lon, battery, device) {
  await fetch(DB_URL, {
    method: "PUT",
    body: JSON.stringify({
      latitude: lat,
      longitude: lon,
      battery: battery,
      device: device,
      time: new Date().toISOString()
    })
  });
}

function startTracking() {
  document.getElementById("statusText").innerText = "‚úÖ Sending Live Location...";

  if (!navigator.geolocation) {
    alert("GPS not supported!");
    return;
  }

  navigator.geolocation.watchPosition(async pos => {
    const lat = pos.coords.latitude;
    const lon = pos.coords.longitude;

    let battery = "Unknown";
    if (navigator.getBattery) {
      const b = await navigator.getBattery();
      battery = Math.round(b.level * 100) + "%";
    }

    const device = navigator.userAgent;

    sendToFirebase(lat, lon, battery, device);
    document.getElementById("info").innerText = `üìå Lat: ${lat} | Lon: ${lon}`;

  }, err => {
    alert("Location permission denied!");
  }, {
    enableHighAccuracy: true,
    maximumAge: 0,
    timeout: 5000
  });
}
</script>

</body>
</html>
