<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>User Live Location</title>
<meta name="viewport" content="width=device-width,initial-scale=1">

<style>
body{font-family:Arial;background:#eef6ff;text-align:center;padding:20px}
.card{background:white;padding:15px;border-radius:12px;max-width:350px;margin:auto}
button{padding:12px 18px;background:#007bff;color:#fff;border:none;border-radius:8px;font-size:16px;margin-top:10px}
</style>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<script>
const firebaseConfig = {
 apiKey:"AIzaSyCsGBSRCHVUhXQZ5DNMEZWgQWk1gxMF1E4",
 authDomain:"signup-d32c5.firebaseapp.com",
 projectId:"signup-d32c5",
 storageBucket:"signup-d32c5.firebasestorage.app",
 messagingSenderId:"583812949955",
 appId:"1:583812949955:web:fab1bb7be94bc1b4ab3f76",
 databaseURL:"https://signup-d32c5-default-rtdb.firebaseio.com/"
};
firebase.initializeApp(firebaseConfig);

let uid = "usr_" + Math.random().toString(36).substr(2,6);

async function getBattery(){
  try {
    const b = await navigator.getBattery();
    return Math.round(b.level*100);
  } catch { return 0; }
}

async function send(){
  let bat = await getBattery();
  navigator.geolocation.getCurrentPosition(pos=>{
    let lat=pos.coords.latitude, lon=pos.coords.longitude;

    firebase.database().ref("users/"+uid).set({
      lat, lon,
      battery:bat,
      device:navigator.userAgent,
      time:new Date().toLocaleString(),
      location:""
    });
    document.getElementById("st").innerText = "‚úÖ Live location sending...";
  },()=>{
    alert("Location permission on kore chan!");
  });
}
setInterval(send,5000);
</script>
</head>
<body>

<div class="card">
<h2>üìç Live Location ON</h2>
<p id="st">Press start below</p>
<button onclick="send()">Start Tracking</button>
</div>

</body>
</html>
