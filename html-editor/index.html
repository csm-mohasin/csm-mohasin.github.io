<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSM | Neural Mobile Editor</title>
    <style>
        :root {
            --neon-cyan: #00f2ff;
            --neon-green: #39ff14;
            --bg-dark: #080808;
            --panel-bg: #121212;
        }

        body, html {
            margin: 0; padding: 0;
            background: var(--bg-dark);
            color: #fff;
            font-family: 'Fira Code', monospace;
            height: 100vh;
            overflow: hidden;
            touch-action: none;
        }

        .main-container { display: flex; flex-direction: column; height: 100vh; }

        .header {
            background: var(--panel-bg);
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--neon-cyan);
            z-index: 20;
        }

        .logo { color: var(--neon-cyan); font-weight: bold; font-size: 0.9rem; letter-spacing: 1px; }
        .dev-tag { font-size: 0.7rem; color: #888; }
        .dev-tag span { color: var(--neon-green); }

        .workspace {
            display: flex;
            flex: 1;
            position: relative;
            background: #000;
            overflow: hidden;
        }

        .panel-editor {
            width: 50%;
            display: flex;
            flex-direction: column;
            background: var(--panel-bg);
            min-width: 0;
        }

        /* --- FIXED SYMBOL BAR --- */
        .symbol-bar {
            background: #1a1a1a;
            display: flex;
            gap: 8px;
            padding: 10px 5px;
            overflow-x: auto;
            border-top: 1px solid var(--neon-cyan);
            flex-shrink: 0; /* Eta fixed thakbe, textarea-r jonno niche jabe na */
            scrollbar-width: none;
        }
        .symbol-bar::-webkit-scrollbar { display: none; }
        
        .sym-btn {
            background: #252525;
            color: var(--neon-cyan);
            border: 1px solid #444;
            padding: 8px 15px;
            border-radius: 4px;
            font-size: 1rem;
            cursor: pointer;
            flex-shrink: 0;
            touch-action: manipulation;
        }

        .panel-preview {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #fff;
            min-width: 0;
        }

        .panel-header {
            background: #1a1a1a;
            padding: 5px 10px;
            font-size: 0.65rem;
            color: var(--neon-cyan);
            border-bottom: 1px solid #333;
        }

        textarea {
            flex: 1;
            background: #0c0c0c;
            border: none;
            color: #d4d4d4;
            padding: 10px;
            font-size: 13px;
            resize: none;
            outline: none;
            line-height: 1.4;
            width: 100%;
            box-sizing: border-box;
        }

        iframe { flex: 1; border: none; background: #fff; }

        #resizer {
            width: 15px;
            cursor: col-resize;
            background: #222;
            display: flex;
            align-items: center;
            justify-content: center;
            border-left: 1px solid #444;
            border-right: 1px solid #444;
            z-index: 10;
            touch-action: none;
        }

        #resizer::after { content: "â‹®"; color: var(--neon-cyan); font-weight: bold; }

        .btn {
            background: transparent;
            border: 1px solid var(--neon-cyan);
            color: var(--neon-cyan);
            padding: 3px 8px;
            font-size: 0.6rem;
            cursor: pointer;
            border-radius: 3px;
        }

        .resizing iframe { pointer-events: none; }
    </style>
</head>
<body>

<div class="main-container">
    <div class="header">
        <div class="logo">CSM_LAB_V2.2</div>
        <div style="display: flex; align-items: center; gap: 10px;">
            <button class="btn" onclick="downloadCode()">SAVE</button>
            <div class="dev-tag">DEV: <span>CSM MOHASIN ALAM</span></div>
        </div>
    </div>

    <div class="workspace" id="container">
        <div class="panel-editor" id="editorSide">
            <div class="panel-header">EDITOR_NODE</div>
            
            <textarea id="codeInput" spellcheck="false" placeholder="Start typing..."></textarea>

            <div class="symbol-bar">
                <button class="sym-btn" onclick="insertChar('<')">&lt;</button>
                <button class="sym-btn" onclick="insertChar('>')">&gt;</button>
                <button class="sym-btn" onclick="insertChar('/')">/</button>
                <button class="sym-btn" onclick="insertChar('=')">=</button>
                <button class="sym-btn" onclick="insertChar('\"')">"</button>
                <button class="sym-btn" onclick="insertChar('{')">{</button>
                <button class="sym-btn" onclick="insertChar('}')">}</button>
                <button class="sym-btn" onclick="insertChar('(')">(</button>
                <button class="sym-btn" onclick="insertChar(')')">)</button>
                <button class="sym-btn" onclick="insertChar(';')">;</button>
                <button class="sym-btn" onclick="insertChar(':')">:</button>
                <button class="sym-btn" onclick="insertChar('[')">[</button>
                <button class="sym-btn" onclick="insertChar(']')">]</button>
            </div>
        </div>

        <div id="resizer"></div>

        <div class="panel-preview" id="previewSide">
            <div class="panel-header" style="background: #f0f0f0; color: #333;">RENDER_NODE</div>
            <iframe id="livePreview"></iframe>
        </div>
    </div>
</div>

<script>
    const codeInput = document.getElementById('codeInput');
    const livePreview = document.getElementById('livePreview');
    const editorSide = document.getElementById('editorSide');
    const resizer = document.getElementById('resizer');
    const container = document.getElementById('container');

    // Default Starter Code
    codeInput.value = `<!DOCTYPE html>\n<html>\n<head>\n<style>\n  body { background: #111; color: #00f2ff; text-align: center; font-family: sans-serif; padding-top: 20%; }\n  h2 { color: #39ff14; text-shadow: 0 0 10px #39ff14; }\n</style>\n</head>\n<body>\n  <h2>CSM NEURAL MOBILE</h2>\n  <p>Symbol bar is fixed at the bottom!</p>\n</body>\n</html>`;

    function updatePreview() {
        const previewDocument = livePreview.contentDocument || livePreview.contentWindow.document;
        previewDocument.open();
        previewDocument.write(codeInput.value);
        previewDocument.close();
    }

    function insertChar(char) {
        const start = codeInput.selectionStart;
        const end = codeInput.selectionEnd;
        const text = codeInput.value;
        codeInput.value = text.substring(0, start) + char + text.substring(end);
        codeInput.focus();
        codeInput.selectionStart = codeInput.selectionEnd = start + char.length;
        updatePreview();
    }

    codeInput.addEventListener('input', updatePreview);
    window.onload = updatePreview;

    // Resizer Logic
    let isDragging = false;
    function startResize() { isDragging = true; document.body.classList.add('resizing'); }
    function stopResize() { isDragging = false; document.body.classList.remove('resizing'); }

    function performResize(e) {
        if (!isDragging) return;
        let clientX = e.touches ? e.touches[0].clientX : e.clientX;
        let containerWidth = container.clientWidth;
        let percentage = (clientX / containerWidth) * 100;

        if (percentage < 10) {
            editorSide.style.width = '0%';
            editorSide.style.display = 'none';
        } else if (percentage > 90) {
            editorSide.style.width = '100%';
        } else {
            editorSide.style.display = 'flex';
            editorSide.style.width = percentage + '%';
        }
    }

    resizer.addEventListener('mousedown', startResize);
    document.addEventListener('mousemove', performResize);
    document.addEventListener('mouseup', stopResize);
    resizer.addEventListener('touchstart', startResize);
    document.addEventListener('touchmove', performResize);
    document.addEventListener('touchend', stopResize);

    function downloadCode() {
        const blob = new Blob([codeInput.value], { type: "text/html" });
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = "csm_mobile_project.html";
        a.click();
    }
</script>

</body>
</html>
