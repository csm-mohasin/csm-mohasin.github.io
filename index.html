<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Carousel + Pink Neon Audio Visualizer - CSM Mohasin</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
*{margin:0;padding:0;box-sizing:border-box;}
html,body{height:100%;overflow:hidden;touch-action:none;font-family:'Poppins',sans-serif;}
body{
  display:flex;
  justify-content:center;
  align-items:center;
  background:radial-gradient(circle at center,#000 0%,#020617 60%,#000 100%);
  perspective:1000px;
  transform-style:preserve-3d;
  position:relative;
}

/* === Visualizer === */
canvas{
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  z-index:0;
  opacity:0.9;
}

/* === Play Button === */
#playBtn{
  position:fixed;
  top:25px;
  right:25px;
  background:transparent;
  border:2px solid #ff4dd2;
  color:#ff4dd2;
  padding:10px 25px;
  border-radius:10px;
  font-size:18px;
  cursor:pointer;
  z-index:10;
  text-shadow:0 0 10px #ff4dd2;
  box-shadow:0 0 15px #ff4dd2;
  transition:0.3s;
}
#playBtn:hover{
  background:#ff4dd2;
  color:#000;
  box-shadow:0 0 25px #ff4dd2,0 0 50px #ff4dd2;
  transform:scale(1.1);
}
#playBtn:active{transform:scale(0.95);}

/* === Carousel === */
#drag-container,#spin-container{
  position:relative;
  display:flex;
  margin:auto;
  transform-style:preserve-3d;
  transform:rotateX(-10deg);
  z-index:2;
}

#drag-container img,#drag-container video{
  transform-style:preserve-3d;
  position:absolute;
  left:0;top:0;
  width:120px;height:165px;
  border-radius:10px;
  object-fit:cover;
  box-shadow:0 0 10px #ff00ff;
  animation:neonGlow 6s linear infinite;
  transition:all 0.4s ease;
}
#drag-container img:hover,#drag-container video:hover{
  transform:scale(1.1) rotateY(8deg);
  filter:brightness(1.1);
  animation:neonGlowFast 2s linear infinite;
}
#drag-container img,#drag-container video{
  -webkit-box-reflect:below 8px linear-gradient(transparent,transparent,rgba(255,255,255,0.05));
}
#ground{
  width:900px;height:900px;
  position:absolute;
  top:100%;left:50%;
  transform:translate(-50%,-50%) rotateX(90deg);
  background:radial-gradient(circle at center,rgba(255,0,255,0.15),transparent);
  filter:blur(25px);
}
@keyframes neonGlow{
  0%,100%{box-shadow:0 0 10px #ff00ff;}
  25%{box-shadow:0 0 10px #00ffff;}
  50%{box-shadow:0 0 10px #00ff00;}
  75%{box-shadow:0 0 10px #ff9900;}
}
@keyframes neonGlowFast{
  0%,100%{box-shadow:0 0 12px #ff00ff;}
  25%{box-shadow:0 0 12px #00ffff;}
  50%{box-shadow:0 0 12px #00ff00;}
  75%{box-shadow:0 0 12px #ff9900;}
}

/* === Glitch Text === */
.glitch{
  position:absolute;
  top:105%;
  left:50%;
  transform:translate(-50%,-50%) rotateX(90deg);
  color:#00fff2;
  font-size:1rem;
  font-weight:bold;
  text-transform:uppercase;
  text-shadow:0 0 6px #00fff2;
  animation:glitch-flicker 2s infinite;
}
.glitch::before,.glitch::after{
  content:attr(data-text);
  position:absolute;
  left:0;top:0;opacity:0.8;
  clip:rect(0,900px,0,0);
}
.glitch::before{
  color:#ff005e;
  animation:glitch-top 2s infinite linear alternate-reverse;
}
.glitch::after{
  color:#00fff2;
  animation:glitch-bottom 2s infinite linear alternate-reverse;
}
@keyframes glitch-top{
  10%{clip:rect(5px,9999px,35px,0);transform:translate(-2px,-2px);}
  20%{clip:rect(15px,9999px,65px,0);transform:translate(2px,0);}
}
@keyframes glitch-bottom{
  10%{clip:rect(45px,9999px,65px,0);transform:translate(2px,1px);}
  20%{clip:rect(25px,9999px,85px,0);transform:translate(-1px,0);}
}
@keyframes glitch-flicker{
  0%,100%{opacity:1;}
  50%{opacity:0.8;}
}
</style>
</head>
<body>

<canvas id="visualizer"></canvas>
<button id="playBtn">▶ Play Music</button>

<!-- 3D Carousel -->
<div id="drag-container">
  <div id="spin-container">
    <img src="https://images.pexels.com/photos/206395/pexels-photo-206395.jpeg?auto=compress&cs=tinysrgb&w=500">
    <img src="https://images.pexels.com/photos/1391498/pexels-photo-1391498.jpeg?auto=compress&cs=tinysrgb&w=500">
    <img src="https://i.postimg.cc/xCH6wX3D/JILIK-s-IMAGE2-jpg-the-history-wapkizs-com.jpg">
    <img src="https://images.pexels.com/photos/1758144/pexels-photo-1758144.jpeg?auto=compress&cs=tinysrgb&w=500">
    <img src="https://images.pexels.com/photos/1382734/pexels-photo-1382734.jpeg?auto=compress&cs=tinysrgb&w=500">
    <img src="https://images.pexels.com/photos/1462636/pexels-photo-1462636.jpeg?auto=compress&cs=tinysrgb&w=500">
    <img src="https://images.pexels.com/photos/139829/pexels-photo-139829.jpeg?auto=compress&cs=tinysrgb&w=500">
    <video autoplay loop muted>
      <source src="https://player.vimeo.com/external/322244668.sd.mp4?s=338c48ac2dfcb1d4c0689968b5baf94eee6ca0c1&profile_id=165" type="video/mp4">
    </video>
    <p class="glitch" data-text="✨ CSM Mohasin Alam ✨">✨ CSM Mohasin Alam ✨</p>
  </div>
  <div id="ground"></div>
</div>

<audio id="myAudio" loop>
  <source src="https://raw.githubusercontent.com/csm-mohasin/csm-mohasin.github.io/main/Humnava%20Mere%20%5BSlowed+Reverb%5D%20Song%20Lyrics%20_%20Jubin%20Nautiyal%20%5BQTHzRZJpcC0%5D.mp3" type="audio/mpeg">
</audio>

<script>
/* === Carousel === */
let radius=240, autoRotate=true, rotateSpeed=-60;
let odrag=document.getElementById('drag-container');
let ospin=document.getElementById('spin-container');
let aEle=[...ospin.getElementsByTagName('img'),...ospin.getElementsByTagName('video')];

ospin.style.width="120px";ospin.style.height="165px";
document.getElementById('ground').style.width=radius*3+"px";
document.getElementById('ground').style.height=radius*3+"px";

setTimeout(init,1000);
function init(delayTime){
  for(let i=0;i<aEle.length;i++){
    aEle[i].style.transform=`rotateY(${i*(360/aEle.length)}deg) translateZ(${radius}px)`;
    aEle[i].style.transition=`transform 1s`;
    aEle[i].style.transitionDelay=delayTime||(aEle.length-i)/4+"s";
  }
}
let sX,sY,nX,nY,desX=0,desY=0,tX=0,tY=10;
if(autoRotate){ospin.style.animation=(rotateSpeed>0?'spin':'spinRevert')+` ${Math.abs(rotateSpeed)}s infinite linear`;}

/* === Drag Rotate === */
document.onpointerdown=function(e){
  clearInterval(odrag.timer);sX=e.clientX;sY=e.clientY;
  this.onpointermove=function(e){
    nX=e.clientX;nY=e.clientY;
    desX=nX-sX;desY=nY-sY;
    tX+=desX*0.1;tY+=desY*0.1;
    if(tY>180)tY=180;if(tY<0)tY=0;
    odrag.style.transform=`rotateX(${-tY}deg) rotateY(${tX}deg)`;
    sX=nX;sY=nY;
  };
  this.onpointerup=function(){
    odrag.timer=setInterval(()=>{
      desX*=0.95;desY*=0.95;
      tX+=desX*0.1;tY+=desY*0.1;
      odrag.style.transform=`rotateX(${-tY}deg) rotateY(${tX}deg)`;
      if(Math.abs(desX)<0.5&&Math.abs(desY)<0.5)clearInterval(odrag.timer);
    },17);
    this.onpointermove=this.onpointerup=null;
  };
  return false;
};
document.onwheel=function(e){
  let d=e.wheelDelta/20||-e.detail;
  radius+=d;init(1);
};

/* === Audio Visualizer === */
const audio=document.getElementById("myAudio");
const btn=document.getElementById("playBtn");
const canvas=document.getElementById("visualizer");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let audioContext,analyser,source,dataArray,animationId;

btn.addEventListener("click",async()=>{
  if(audio.paused){
    await audio.play();
    btn.textContent="⏸ Pause";
    startVisualizer();
  }else{
    audio.pause();
    btn.textContent="▶ Play";
    cancelAnimationFrame(animationId);
  }
});

function startVisualizer(){
  if(!audioContext){
    audioContext=new (window.AudioContext||window.webkitAudioContext)();
    source=audioContext.createMediaElementSource(audio);
    analyser=audioContext.createAnalyser();
    analyser.fftSize=256;
    dataArray=new Uint8Array(analyser.frequencyBinCount);
    source.connect(analyser);
    analyser.connect(audioContext.destination);
  }

  function draw(){
    animationId=requestAnimationFrame(draw);
    analyser.getByteFrequencyData(dataArray);
    ctx.clearRect(0,0,canvas.width,canvas.height);

    const gradient=ctx.createRadialGradient(canvas.width/2,canvas.height/2,100,canvas.width/2,canvas.height/2,800);
    gradient.addColorStop(0,"rgba(255,77,210,0.15)");
    gradient.addColorStop(1,"rgba(0,0,0,0.9)");
    ctx.fillStyle=gradient;
    ctx.fillRect(0,0,canvas.width,canvas.height);

    const barWidth=(canvas.width/dataArray.length)*2.5;
    let x=0;
    for(let i=0;i<dataArray.length;i++){
      const barHeight=dataArray[i]*1.4;
      const alpha=0.4+barHeight/500;
      ctx.fillStyle=`rgba(255,77,210,${alpha})`;
      const y=canvas.height/2-barHeight/2;
      ctx.fillRect(x,y,barWidth,barHeight);
      x+=barWidth+1;
    }
  }
  draw();
}

window.addEventListener("resize",()=>{
  canvas.width=window.innerWidth;
  canvas.height=window.innerHeight;
});
</script>
</body>
</html>
